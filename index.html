<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>tracking.js - color with camera</title>
  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="style.css">
  <script type="text/javascript" src="./GLFluid.js"></script>
  <script>
    window.addEventListener("touchmove", function (event) {
      event.preventDefault();
    }, false);
    if (typeof window.devicePixelRatio != 'undefined' && window.devicePixelRatio > 2) {
      var meta = document.getElementById("viewport");
      meta.setAttribute('content', 'width=device-width, initial-scale=' + (2 / window.devicePixelRatio) +
        ', user-scalable=no');
    }
  </script>
  <script src="lib/tracking.js"></script>
  <script src="lib/data.gui.js"></script>
  <script src="scripts/color_camera_gui.js"></script>

</head>

<body>
  <div id="content">
  </div>

  
  <div class="demo-frame">
    <div class="demo-container">
      <video id="video" width="600" height="450" preload autoplay loop muted controls></video>
    </div>
  </div>

  <script type="text/javascript">
    lime.embed("content", 0, 0, "FFFFFF");
  </script>

  <script>
    window.onload = function () {
      var video = document.getElementById('video');

      var tracker = new tracking.ColorTracker();

      tracking.track('#video', tracker, {
        camera: true
      });

      tracker.on('track', function (event) {

        event.data.forEach(function (rect) {
          if (rect.color === 'custom') {
            rect.color = tracker.customColor;
          }
          console.log(rect);
          /*
          context.strokeStyle = rect.color;
          context.strokeRect(rect.x, rect.y, rect.width, rect.height);
          context.font = '11px Helvetica';
          context.fillStyle = "#fff";
          context.fillText('x: ' + rect.x + 'px', rect.x + rect.width + 5, rect.y + 11);
          context.fillText('y: ' + rect.y + 'px', rect.x + rect.width + 5, rect.y + 22);
          */
        });
      });

      initGUIControllers(tracker);
    };
  </script>

</body>

</html>